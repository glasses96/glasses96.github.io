(this.__LOADABLE_LOADED_CHUNKS__=this.__LOADABLE_LOADED_CHUNKS__||[]).push([[15],{235:function(e,n,t){"use strict";t.r(n);var r=t(4),a=t(0),i=t.n(a),o=t(5),c=t(8),l=t(18),u=t(149),s=t(66),d=t(11),m=t(6);function f(){var e=Object(r.a)(["\n  "," {\n    display: none;\n  }\n"]);return f=function(){return e},e}function b(){var e=Object(r.a)(["\n      z-index: 1;\n      box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.015);\n    "]);return b=function(){return e},e}function p(){var e=Object(r.a)(["\n  min-width: 0;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  ","\n"]);return p=function(){return e},e}function h(){var e=Object(r.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  animation: "," 0.5s forwards;\n"]);return h=function(){return e},e}var g=o.c.div(h(),s.a.fadeIn),v=o.c.div(p(),(function(e){return e.shadow&&Object(o.b)(b())})),O=Object(o.c)(v)(f(),d.a.medium),j=function(e){e.theme;var n=e.left,t=e.right;return a.createElement(g,null,a.createElement(v,{shadow:!0,"data-testid":"left",style:{backgroundColor:m.a.bg_page2}},n),a.createElement(O,{"data-testid":"right",style:{backgroundColor:m.a.bg_element8}},t))},w=t(12),x=t.n(w),E=t(13),k=t(43),y=t(22),C=t(32),S=t(39),_=t(23),T=t(38),z=(t(411),t(346)),D=t.n(z),L=t(383);function I(){var e=Object(r.a)(["\n  ","\n"]);return I=function(){return e},e}function R(){var e=Object(r.a)(["\n  ","\n"]);return R=function(){return e},e}function P(){var e=Object(r.a)(["\n  background: transparent;\n  display: block;\n  padding: 0;\n  font-size: 2.75rem;\n  "," {\n    font-size: 1.8rem;\n  }\n  width: 100%;\n  resize: none;\n  line-height: 1.5;\n  outline: none;\n  border: none;\n  font-weight: bold;\n  color: ",";\n  &::placeholder {\n    color: ",";\n  }\n"]);return P=function(){return e},e}var A=Object(o.b)(P(),Object(d.b)(767),m.a.text1,m.a.text3),N=o.c.textarea(R(),A),U=Object(o.c)(L.a)(I(),A),M=(t(384),t(385),t(29)),H=t(48),B=t(86);function $(){var e=Object(r.a)(["\n  width: 1px;\n  height: 1.25rem;\n  margin-left: 0.5rem;\n  margin-right: 0.5rem;\n  background: ",";\n"]);return $=function(){return e},e}function q(){var e=Object(r.a)(["\n  width: 3rem;\n  height: 3rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.75rem;\n  color: ",";\n  cursor: pointer;\n  flex-shrink: 0;\n\n  "," {\n    width: 2.5rem;\n    height: 2.5rem;\n    font-size: 1.45rem;\n  }\n  &:hover {\n    color: ",";\n    background: ",";\n  }\n  background: none;\n  outline: none;\n  border: none;\n  padding: 0;\n\n  &.ql-active {\n    color: ",";\n  }\n"]);return q=function(){return e},e}function W(){var e=Object(r.a)(["\n  font-size: 1rem;\n  font-weight: bold;\n  font-family: serif;\n  span {\n    font-size: 0.75rem;\n  }\n"]);return W=function(){return e},e}function F(){var e=Object(r.a)(["\n      box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.09);\n      margin-bottom: 0;\n    "]);return F=function(){return e},e}function K(){var e=Object(r.a)(["\n      margin-bottom: 1rem;\n      padding-left: 3rem;\n      padding-right: 3rem;\n\n      "," {\n        padding-left: 1rem;\n        padding-right: 1rem;\n        flex-wrap: unset;\n        overflow-x: auto;\n      }\n      width: auto;\n    "]);return K=function(){return e},e}function V(){var e=Object(r.a)(["\n  width: 100%;\n  top: 0;\n  display: flex;\n  align-items: center;\n  margin-bottom: 1rem;\n  width: 100%;\n  background: ",";\n  z-index: ",";\n  transition: all 0.125s ease-in;\n  flex-wrap: wrap;\n\n  ","\n\n  ","\n\n  .mobile-placeholder {\n    display: none;\n    "," {\n      display: block;\n    }\n    height: 1px;\n    width: 1rem;\n    flex-shrink: 0;\n  }\n"]);return V=function(){return e},e}var Y=o.c.div(V(),m.a.bg_page2,B.a.Toolbar,(function(e){return e.forMarkdown&&Object(o.b)(K(),Object(d.b)(767))}),(function(e){return e.shadow&&Object(o.b)(F())}),Object(d.b)(767)),G=o.c.div(W()),X=o.c.button(q(),m.a.text3,Object(d.b)(767),m.a.text1,m.a.bg_element2,m.a.primary1),Q=o.c.div($(),m.a.border3),J=function(e){var n=e.shadow,t=e.mode,r=e.onClick,i=void 0===r?function(){}:r,o=(e.onConvert,e.innerRef),c=e.ios,l="MARKDOWN"===t;return a.createElement(Y,{id:"toolbar",shadow:n,forMarkdown:l,ref:o},a.createElement(X,{className:"ql-header",value:1,onClick:function(){return i("heading1")}},a.createElement(G,null,"H",a.createElement("span",null,"1"))),a.createElement(X,{className:"ql-header",value:2,onClick:function(){return i("heading2")}},a.createElement(G,null,"H",a.createElement("span",null,"2"))),a.createElement(X,{className:"ql-header",value:3,onClick:function(){return i("heading3")}},a.createElement(G,null,"H",a.createElement("span",null,"3"))),a.createElement(X,{className:"ql-header",value:4,onClick:function(){return i("heading4")}},a.createElement(G,null,"H",a.createElement("span",null,"4"))),a.createElement(Q,null),!c&&a.createElement(a.Fragment,null,a.createElement(X,{className:"ql-bold",onClick:function(){return i("bold")}},a.createElement(H.l,null)),a.createElement(X,{className:"ql-italic",onClick:function(){return i("italic")}},a.createElement(H.m,null)),!l&&a.createElement(X,{className:"ql-underline"},a.createElement(H.p,null)),a.createElement(X,{className:"ql-strike",onClick:function(){return i("strike")}},a.createElement(H.o,null)),a.createElement(Q,null),a.createElement(X,{className:"ql-blockquote",onClick:function(){return i("blockquote")}},a.createElement(H.n,null)),a.createElement(X,{className:"ql-link",onClick:function(){return i("link")}},a.createElement(H.s,null))),a.createElement(X,{className:"ql-image",onClick:function(){return i("image")}},a.createElement(H.r,null)),!c&&a.createElement(X,{className:"ql-code-block",onClick:function(){return i("codeblock")}},a.createElement(H.j,null)),a.createElement("div",{className:"mobile-placeholder"}))},Z=t(87),ee=t.n(Z),ne=t(151),te=t(92);function re(){var e=Object(r.a)(["\n  z-index: 5;\n  position: absolute;\n  margin-bottom: 1rem;\n  & > .wrapper {\n    margin-top: 1rem;\n    width: 20rem;\n    background: ",";\n    box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.08);\n    border-radius: 4px;\n    .top-wrapper {\n      margin-bottom: 1rem;\n      .title {\n        font-weight: bold;\n        color: ",";\n      }\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      svg {\n        font-size: 1.5rem;\n        color: ",";\n        cursor: pointer;\n        &:hover {\n          color: ",";\n        }\n      }\n    }\n    form {\n      width: 100%;\n      display: flex;\n      align-items: center;\n      input {\n        color: ",";\n        background: transparent;\n        flex: 1;\n        border: none;\n        outline: none;\n        border-bottom: 1px inset ",";\n        font-size: 1rem;\n        margin-right: 0.5rem;\n        line-height: 1.5;\n        padding: 0;\n      }\n    }\n    padding: 1.5rem 1rem;\n  }\n"]);return re=function(){return e},e}var ae=o.c.div(re(),m.a.bg_element1,m.a.text1,m.a.text3,m.a.text1,m.a.text1,M.b.gray5),ie=a.useCallback,oe=a.useRef,ce=a.useEffect,le=function(e){var n=e.left,t=e.top,r=e.bottom,i=e.stickToRight,o=e.onConfirm,l=e.onClose,u=e.onDelete,s=e.defaultValue,d=Object(ne.a)(s),m=Object(c.a)(d,2),f=m[0],b=m[1],p=ie((function(e){e.preventDefault(),o(f)}),[o,f]),h=oe(null);return ce((function(){h.current&&h.current.focus()}),[]),a.createElement(ee.a,{onOutsideClick:l},a.createElement(ae,{style:{left:i?"initial":n,top:t||"initial",bottom:r||"initial",right:i?"3rem":"initial"}},a.createElement("div",{className:"wrapper"},a.createElement("div",{className:"top-wrapper"},a.createElement("div",{className:"title"},"\ub9c1\ud06c ",s?"\uc218\uc815":"\ub4f1\ub85d"),s&&a.createElement(H.k,{onClick:u})),a.createElement("form",{onSubmit:p},a.createElement("input",{value:f,onChange:b,placeholder:"URL \uc744 \uc785\ub825\ud558\uc138\uc694",ref:h}),a.createElement(te.a,{color:"gray",size:"SMALL"},"\ud655\uc778")))))},ue=t(17),se=t(150),de=function(e){var n=e.visible,t=e.onCancel,r=e.onConfirm;return e.convertTo===u.a.MARKDOWN?a.createElement(se.a,{visible:n,title:"\ub9c8\ud06c\ub2e4\uc6b4 \uc5d0\ub514\ud130\ub85c \uc804\ud658",onCancel:t,onConfirm:r},"\uc5d0\ub514\ud130 \ubaa8\ub4dc\ub97c \uc804\ud658\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"):a.createElement(se.a,{visible:n,title:"\uc26c\uc6b4 \uc5d0\ub514\ud130\ub85c \uc804\ud658",onCancel:t,onConfirm:r},"\uc5d0\ub514\ud130 \ubaa8\ub4dc\ub97c \uc804\ud658\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")},me=t(40);function fe(){var e=Object(r.a)(["\n  flex: 1;\n  outline: none;\n  font-size: 1.125rem;\n  padding-left: 3rem;\n  padding-right: 3rem;\n  line-height: 1.5;\n  padding-bottom: 3rem;\n  color: ",";\n  "," {\n    font-size: 0.875rem;\n    padding-left: 1rem;\n    padding-right: 1rem;\n    padding-bottom: 1rem;\n  }\n"]);return fe=function(){return e},e}function be(){var e=Object(r.a)(["\n  position: fixed;\n  bottom: 0;\n  width: 100%;\n  z-index: ",";\n"]);return be=function(){return e},e}function pe(){var e=Object(r.a)(["\n  flex: 1;\n  min-height: 0;\n  display: flex;\n  flex-direction: column;\n"]);return pe=function(){return e},e}function he(){var e=Object(r.a)(["\n  padding-top: 2rem;\n  padding-left: 3rem;\n  padding-right: 3rem;\n  "," {\n    padding: 1rem;\n  }\n"]);return he=function(){return e},e}function ge(){var e=Object(r.a)(["\n  background: ",";\n  height: 6px;\n  width: 4rem;\n  margin-top: 1.5rem;\n  margin-bottom: 1rem;\n  "," {\n    margin-top: 1rem;\n    margin-bottom: 0.66rem;\n  }\n  border-radius: 1px;\n"]);return ge=function(){return e},e}function ve(){var e=Object(r.a)(["\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n\n  /* width */\n  *::-webkit-scrollbar {\n    width: 4px;\n  }\n\n  /* Handle */\n  *::-webkit-scrollbar-thumb {\n    background: ","!important;\n    border-radius: 1px !important;\n  }\n\n  */* Handle on hover */\n  ::-webkit-scrollbar-thumb:hover {\n    background: ",";\n  }\n\n  & > .wrapper {\n    min-height: 0;\n    padding-bottom: 4rem;\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n  }\n\n  .CodeMirror-lines {\n    padding: 4px 0; /* Vertical padding around content */\n    padding-bottom: 3rem;\n  }\n\n  .CodeMirror pre.CodeMirror-line,\n  .CodeMirror pre.CodeMirror-line-like {\n    padding: 0 3rem; /* Horizontal padding of content */\n    "," {\n      padding: 0 1rem;\n    }\n  }\n\n  .CodeMirror {\n    min-height: 0;\n    flex: 1;\n    font-size: 1.125rem;\n    line-height: 1.5;\n    color: ",";\n    font-family: 'Fira Mono', monospace;\n    /* font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New', */\n    .cm-header {\n      line-height: 1.5;\n      color: ",";\n    }\n    .cm-header-1 {\n      font-size: 2.5rem;\n    }\n    .cm-header-2 {\n      font-size: 2rem;\n    }\n    .cm-header-3 {\n      font-size: 1.5rem;\n    }\n    .cm-header-4,\n    .cm-header-5,\n    .cm-header-6 {\n      font-size: 1.3125rem;\n    }\n    .cm-strong,\n    .cm-em {\n      color: ",";\n    }\n    .CodeMirror-placeholder {\n      color: ",";\n      font-style: italic;\n    }\n\n    "," {\n      font-size: 0.875rem;\n      .cm-header-1 {\n        font-size: 2rem;\n      }\n      .cm-header-2 {\n        font-size: 1.5rem;\n      }\n      .cm-header-3 {\n        font-size: 1.15rem;\n      }\n      .cm-header-4,\n      .cm-header-5,\n      .cm-header-6 {\n        font-size: 1rem;\n      }\n    }\n  }\n"]);return ve=function(){return e},e}t(412),t(414),t(515),t(415);var Oe=function(e){for(var n=Object.keys(Te),t=0;t<n.length;t+=1){var r=n[t],a=(0,Te[n[t]])(e);if(a)return"!".concat(r,"[").concat(a,"]")}return null},je=function(e){return e.replace(/#{1,6} /,"")};function we(e){var n=e.hide,t=e.children,r="undefined"!==typeof window&&window.screen.height||508,i=Object(me.useSpring)({maxHeight:n?0:.5*r,opacity:n?0:1,config:{duration:300}});return a.createElement(me.animated.div,{style:i},a.createElement(ye,null,t))}var xe=function(e){function n(){var e,t;Object(y.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=Object(S.a)(this,(e=Object(_.a)(n)).call.apply(e,[this].concat(i)))).block=a.createRef(),t.toolbarElement=a.createRef(),t.editorElement=a.createRef(),t.appleEditorElement=a.createRef(),t.toolbarTop=0,t.state={addLink:{top:0,bottom:0,left:0,visible:!1,stickToRight:!1},askChangeEditor:!1,clientWidth:0,hideUpper:!1,appleCursorPos:0},t.codemirror=null,t.ignore=!1,t.isIOS=function(){if("enabled"===Object({NODE_ENV:"production",PUBLIC_URL:"https://static.velog.io",REACT_APP_GRAPHQL_HOST_NOCDN:"https://v2.velog.io/",REACT_APP_GRAPHQL_HOST:"https://v2cdn.velog.io/",REACT_APP_API_HOST:"https://v2.velog.io/",REACT_APP_REDIS_HOST:"ip-172-31-26-176.ap-northeast-2.compute.internal"}).REACT_APP_SSR)return!1;var e=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,n=(/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!window.MSStream;return e||n}(),t.initialize=function(){t.isIOS||t.editorElement.current&&(t.codemirror=D.a.fromTextArea(t.editorElement.current,{mode:"markdown",theme:"one-".concat(t.props.theme),placeholder:"\ub2f9\uc2e0\uc758 \uc774\uc57c\uae30\ub97c \uc801\uc5b4\ubcf4\uc138\uc694...",lineWrapping:!0}),Object(ue.c)()||(t.codemirror.setValue(t.props.initialBody),t.codemirror.on("change",(function(e){t.props.onChangeMarkdown(e.getValue()),t.stickToBottomIfNeeded();var n=e.getDoc(),r=n.getCursor().line;if(n.lastLine()-r<5){var a=document.getElementById("preview");if(!a)return;a.scrollTop=a.scrollHeight}})),t.codemirror.on("scroll",(function(e){var n=e.getScrollInfo();n.top>0&&n.height>window.screen.height?t.setState({hideUpper:!0}):t.setState({hideUpper:!1})})),t.codemirror.on("dragover",(function(e,n){n.dataTransfer&&(n.dataTransfer.dropEffect="copy")})),t.codemirror.on("mousewheel",(function(e){console.log(e.getScrollInfo())})),t.codemirror.on("paste",(function(e,n){var t=n.clipboardData||n.originalEvent.clipboardData;if(t){var r=t.getData("Text"),a=Oe(r);if(a){var i=e.getSelection();if(n.preventDefault(),i.length>0)e.replaceSelection(a);else{var o=e.getDoc(),c=o.getCursor(),l={line:c.line,ch:c.ch};o.replaceRange(a,l)}}else{var u=t.items;u&&2===u.length&&"file"===u[1].kind&&n.preventDefault()}}}))))},t.stickToBottomIfNeeded=function(){if(t.block.current){var e=t.block.current,n=e.scrollHeight;n-e.scrollTop-e.clientHeight<192&&t.block.current.scrollTo(0,n)}},t.handleResize=function(){t.block.current&&t.setState({clientWidth:t.block.current.clientWidth})},t.addImageToEditor=function(e){if(t.isIOS){var n=t.appleEditorElement.current;if(!n)return;var r=t.props,a=r.markdown,i=r.onChangeMarkdown,o=n.selectionEnd,c=a.slice(0,o),l=a.slice(o,a.length),u="![](".concat(encodeURI(e),")");return i("".concat(c).concat(u).concat(l)),void setTimeout((function(){n.focus();var e=o+u.length;n.selectionStart=e,n.selectionEnd=e}),0)}if(t.codemirror){var s=t.codemirror.getValue().split("\n"),d=s.findIndex((function(e){return e.includes("![\uc5c5\ub85c\ub4dc\uc911..]")}));if(-1!==d){var m=s[d].indexOf("![\uc5c5\ub85c\ub4dc\uc911..]");t.codemirror.getDoc().replaceRange("![](".concat(encodeURI(e),")"),{line:d,ch:m},{line:d,ch:s[d].length})}}},t.addTempImageBlobToEditor=function(e){var n="![\uc5c5\ub85c\ub4dc\uc911..](".concat(e,")\n");t.isIOS||t.codemirror&&t.codemirror.getDoc().replaceSelection(n)},t.handleOpenAddLink=function(){var e;if(t.codemirror){var n=t.codemirror.getDoc().getCursor(),r=t.codemirror.cursorCoords(n);if(t.block.current){var a=r.left>t.block.current.clientWidth-341,i=t.block.current.scrollTop+r.top+t.codemirror.defaultTextHeight()/2+1,o=i+173>(null===(e=t.block.current)||void 0===e?void 0:e.clientHeight)?{top:null,bottom:64}:{top:i,bottom:null};t.setState({addLink:Object(k.a)({visible:!0},o,{left:r.left,stickToRight:a})})}}},t.handleConfirmAddLink=function(e){if(t.setState({addLink:Object(k.a)({},t.state.addLink,{visible:!1})}),t.codemirror){var n=t.codemirror.getDoc(),r=n.getSelection(),a=n.getCursor("end");if(t.codemirror.focus(),0===r.length)return n.replaceSelection("[\ub9c1\ud06c\ud14d\uc2a4\ud2b8](".concat(e,")")),void n.setSelection({line:a.line,ch:a.ch+1},{line:a.line,ch:a.ch+6});n.replaceSelection("[".concat(r,"](").concat(e,")")),n.setCursor({line:a.line,ch:a.ch+e.length+4})}},t.handleCancelAddLink=function(){t.setState({addLink:Object(k.a)({},t.state.addLink,{visible:!1})})},t.handleToolbarClickForApple=function(e){var n;if(t.appleEditorElement.current){var r=(null===(n=t.appleEditorElement.current)||void 0===n?void 0:n.selectionStart)||0,a=t.props,i=a.markdown,o=a.onChangeMarkdown,c=i.slice(0,r),l=c.lastIndexOf("\n"),u=c.slice(0,l+1),s=i.slice(l+1,i.length),d=s.indexOf("\n");-1===d&&(d=s.length);var m=s.slice(0,d),f=s.slice(d,s.length),b=function(e){setTimeout((function(){t.appleEditorElement.current.selectionStart=e,t.appleEditorElement.current.selectionEnd=e}),0)};console.log({lineText:m});var p={heading1:function(){if(/^# /.test(m)){var e=m.replace(/^# /,"");return o("".concat(u).concat(e).concat(f)),void b(r-2)}if(/^#{1,4} /.test(m)){var n=m.replace(/^#{1,4} /,"# ");o("".concat(u).concat(n).concat(f));var t=n.length-m.length;b(r+t)}else o("".concat(u,"# ").concat(s)),b(r+2)},heading2:function(){if(/^## /.test(m)){var e=m.replace(/^## /,"");return o("".concat(u).concat(e).concat(f)),void b(r-3)}if(/^#{1,4} /.test(m)){var n=m.replace(/^#{1,4} /,"## ");o("".concat(u).concat(n).concat(f));var t=n.length-m.length;b(r+t)}else o("".concat(u,"## ").concat(s)),b(r+3)},heading3:function(){if(/^### /.test(m)){var e=m.replace(/^### /,"");return o("".concat(u).concat(e).concat(f)),void b(r-4)}if(/^#{1,4} /.test(m)){var n=m.replace(/^#{1,4} /,"### ");o("".concat(u).concat(n).concat(f));var t=n.length-m.length;b(r+t)}else o("".concat(u,"### ").concat(s)),b(r+4)},heading4:function(){if(/^#### /.test(m)){var e=m.replace(/^#### /,"");return o("".concat(u).concat(e).concat(f)),void b(r-5)}if(/^#{1,4} /.test(m)){var n=m.replace(/^#{1,4} /,"#### ");o("".concat(u).concat(n).concat(f));var t=n.length-m.length;b(r+t)}else o("".concat(u,"#### ").concat(s)),b(r+5)},image:function(){t.props.onUpload()}};t.appleEditorElement.current.focus(),p[e]()}},t.handleToolbarClick=function(e){var n=t.codemirror;if(t.isIOS)return t.handleToolbarClickForApple(e);if(n){var r=n.getDoc(),a=r.getCursor(),i={start:r.getCursor("start"),end:r.getCursor("end")},o=r.getLine(a.line),c=Object(k.a)({},[1,2,3,4].map((function(e){return function(){var n="#".repeat(e),t=je(o);r.setSelection({line:a.line,ch:0},{line:a.line,ch:o.length}),r.replaceSelection("".concat(n," ").concat(t))}})).reduce((function(e,n,t){return Object.assign(e,Object(E.a)({},"heading".concat(t+1),n))}),{}),{bold:function(){var e=r.getSelection();if("\ud14d\uc2a4\ud2b8"===e&&/\*\*(.*)\*\*/.test(r.getRange({line:i.start.line,ch:i.start.ch-2},{line:i.end.line,ch:i.end.ch+2})))return r.setSelection({line:i.start.line,ch:i.start.ch-2},{line:i.end.line,ch:i.end.ch+2}),r.replaceSelection("\ud14d\uc2a4\ud2b8"),void r.setSelection({line:i.start.line,ch:i.start.ch-2},{line:i.end.line,ch:i.end.ch-2});return/\*\*(.*)\*\*/.test(e)?(r.replaceSelection(e.replace(/\*\*/g,"")),void r.setSelection({line:i.start.line,ch:i.start.ch},{line:i.end.line,ch:i.end.ch-4})):e.length>0?(r.replaceSelection("**".concat(e,"**")),void r.setSelection({line:i.start.line,ch:i.start.ch},{line:i.end.line,ch:i.end.ch+4})):(r.replaceSelection("**\ud14d\uc2a4\ud2b8**"),void r.setSelection({line:a.line,ch:a.ch+2},{line:a.line,ch:a.ch+5}))},italic:function(){var e=r.getSelection();if(0===e.length)return r.replaceSelection("_\ud14d\uc2a4\ud2b8_"),void r.setSelection({line:a.line,ch:a.ch+1},{line:a.line,ch:a.ch+4});if("\ud14d\uc2a4\ud2b8"===e){var n=r.getRange({line:i.start.line,ch:i.start.ch-1},{line:i.end.line,ch:i.end.ch+1});/_(.*)_/.test(n)&&(e=n,r.setSelection({line:i.start.line,ch:i.start.ch-1},{line:i.end.line,ch:i.end.ch+1}),i.start={line:i.start.line,ch:i.start.ch-1},i.end={line:i.end.line,ch:i.end.ch+1})}if(/_(.*)_/.test(e)){var t=e.replace(/^_/,"").replace(/_$/,"");return r.replaceSelection(t),void r.setSelection({line:i.start.line,ch:i.start.ch},{line:i.end.line,ch:i.end.ch-2})}e.length>0&&(r.replaceSelection("_".concat(e,"_")),r.setSelection({line:i.start.line,ch:i.start.ch},{line:i.end.line,ch:i.end.ch+2}))},strike:function(){var e=r.getSelection();if(0===e.length)return r.replaceSelection("~~\ud14d\uc2a4\ud2b8~~"),void r.setSelection({line:a.line,ch:a.ch+2},{line:a.line,ch:a.ch+5});if("\ud14d\uc2a4\ud2b8"===e){var n=r.getRange({line:i.start.line,ch:i.start.ch-2},{line:i.end.line,ch:i.end.ch+2});/~~(.*)~~/.test(n)&&(e=n,r.setSelection({line:i.start.line,ch:i.start.ch-2},{line:i.end.line,ch:i.end.ch+2}),i.start={line:i.start.line,ch:i.start.ch-2},i.end={line:i.end.line,ch:i.end.ch+2})}if(/~~(.*)~~/.test(e)){var t=e.replace(/^~~/,"").replace(/~~$/,"");return r.replaceSelection(t),void r.setSelection({line:i.start.line,ch:i.start.ch},{line:i.end.line,ch:i.end.ch-4})}e.length>0&&(r.replaceSelection("~~".concat(e,"~~")),r.setSelection({line:i.start.line,ch:i.start.ch},{line:i.end.line,ch:i.end.ch+4}))},blockquote:function(){var e=/^> /.test(o);r.setSelection({line:a.line,ch:0},{line:a.line,ch:o.length}),e?(r.replaceSelection(o.replace(/^> /,"")),r.setCursor({line:a.line,ch:a.ch-2})):(r.replaceSelection("> ".concat(o)),r.setCursor({line:a.line,ch:a.ch+2}))},link:function(){t.handleOpenAddLink()},image:function(){t.props.onUpload()},codeblock:function(){var e=r.getSelection();if(0===e.length)return r.replaceSelection("```\n\ucf54\ub4dc\ub97c \uc785\ub825\ud558\uc138\uc694\n```"),void r.setSelection({line:a.line+1,ch:0},{line:a.line+1,ch:9});r.replaceSelection("```\n".concat(e,"\n```"))}})[e];c&&(c(),n.focus())}},t.handleTitleChange=function(e){t.props.onChangeTitle(e.target.value)},t.handleAskConvert=function(){t.setState({askChangeEditor:!0})},t.handleConfirmConvert=function(){if(t.setState({askChangeEditor:!1}),t.codemirror){var e=t.codemirror.getValue();t.props.onConvert(e)}},t.handleCancelConvert=function(){t.setState({askChangeEditor:!1})},t.handleAppleTextareaChange=function(e){t.props.onChangeMarkdown(e.target.value),t.setState({appleCursorPos:e.target.selectionStart})},t}return Object(T.a)(n,e),Object(C.a)(n,[{key:"componentDidUpdate",value:function(e){var n=this.props,t=n.lastUploadedImage;if(n.initialBody!==e.initialBody){if(!this.codemirror)return;if(this.codemirror.getValue()===this.props.initialBody)return;this.codemirror.setValue(this.props.initialBody)}t&&e.lastUploadedImage!==t&&this.addImageToEditor(t),this.props.tempBlobImage&&this.props.tempBlobImage!==e.tempBlobImage&&this.addTempImageBlobToEditor(this.props.tempBlobImage)}},{key:"componentDidMount",value:function(){var e=this;this.initialize(),setTimeout((function(){e.toolbarElement.current&&(e.toolbarTop=e.toolbarElement.current.getBoundingClientRect().top)})),this.block.current&&this.setState({clientWidth:this.block.current.clientWidth}),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e=this.state,n=e.addLink,t=e.clientWidth,r=this.props,i=r.title,o=r.tagInput,c=r.footer;return a.createElement(Ee,{ref:this.block,"data-testid":"codemirror"},a.createElement("div",{className:"wrapper"},a.createElement(we,{hide:this.state.hideUpper},ue.k?a.createElement(N,{placeholder:"\uc81c\ubaa9\uc744 \uc785\ub825\ud558\uc138\uc694",rows:1}):a.createElement(U,{placeholder:"\uc81c\ubaa9\uc744 \uc785\ub825\ud558\uc138\uc694",onChange:this.handleTitleChange,value:i}),a.createElement(ke,null),o),a.createElement(J,{shadow:this.state.hideUpper,mode:"MARKDOWN",onClick:this.handleToolbarClick,onConvert:this.handleAskConvert,innerRef:this.toolbarElement,ios:this.isIOS}),a.createElement(Ce,null,n.visible&&a.createElement(le,{defaultValue:"",left:n.left,top:n.top,bottom:n.bottom,stickToRight:n.stickToRight,onConfirm:this.handleConfirmAddLink,onClose:this.handleCancelAddLink}),a.createElement("textarea",{ref:this.editorElement,style:{display:"none"}}),this.isIOS&&a.createElement(_e,{onChange:this.handleAppleTextareaChange,ref:this.appleEditorElement,value:this.props.markdown}))),a.createElement(de,{visible:this.state.askChangeEditor,onConfirm:this.handleConfirmConvert,onCancel:this.handleCancelConvert,convertTo:u.a.WYSIWYG}),a.createElement(Se,{style:{width:t||"50%"}},c))}}]),n}(a.Component),Ee=o.c.div(ve(),m.a.bg_element5,m.a.bg_element6,Object(d.b)(767),m.a.text1,m.a.text1,m.a.text1,m.a.text3,d.a.custom(767)),ke=o.c.div(ge(),M.b.gray7,Object(d.b)(767)),ye=o.c.div(he(),Object(d.b)(767)),Ce=o.c.div(pe()),Se=o.c.div(be(),B.a.WriteFooter),_e=o.c.textarea(fe(),m.a.text1,d.a.custom(767)),Te={youtube:function(e){var n=/^<iframe.*src="https:\/\/www.youtube.com\/embed\/(.*?)".*<\/iframe>$/.exec(e);return n?n[1]:null},twitter:function(e){if(!/^<blockquote class="twitter-tweet/.test(e))return null;for(var n=/href="(.*?)"/g,t=[],r=n.exec(e);r;)t.push(r[1]),r=n.exec(e);var a=/twitter.com\/(.*?)\?/.exec(t[t.length-1]);return a?a[1]:null},codesandbox:function(e){var n=/^<iframe[\s\S]*src="https:\/\/codesandbox[\s\S]io\/embed\/([\s\S]*?)"[\s\S]*<\/iframe>$/.exec(e);return n?n[1]:null},codepen:function(e){var n=/^<iframe.*src="https:\/\/codepen.io\/(.*?)".*/.exec(e);return console.log(n),n?n[1]:null}},ze=t(416),De=t.n(ze),Le=t(621),Ie=t.n(Le),Re=t(469),Pe=t.n(Re),Ae=t(471),Ne=t.n(Ae),Ue=t(34);function Me(){var e=Object(r.a)(["\n  color: ",";\n  font-size: 1rem;\n  display: inline-flex;\n  align-items: center;\n  height: 2rem;\n  border-radius: 1rem;\n  padding-left: 1rem;\n  padding-right: 1rem;\n  background: ",";\n  color: ",";\n  margin-right: 0.75rem;\n  transition: ease-in 0.125s;\n  cursor: pointer;\n  &:hover {\n    opacity: 0.6;\n  }\n  margin-bottom: 0.75rem;\n  animation: "," 0.125s forwards ease-in-out;\n  "," {\n    height: 1.5rem;\n    font-size: 0.75rem;\n    border-radius: 0.75rem;\n    padding-left: 0.75rem;\n    padding-right: 0.75rem;\n    margin-right: 0.5rem;\n    margin-bottom: 0.5rem;\n  }\n"]);return Me=function(){return e},e}function He(){var e=Object(r.a)(["\n  background: transparent;\n  display: inline-flex;\n  outline: none;\n  cursor: text;\n  font-size: 1.125rem;\n  line-height: 2rem;\n  "," {\n    line-height: 1.5rem;\n    font-size: 0.75rem;\n  }\n  margin-bottom: 0.75rem;\n  min-width: 8rem;\n  border: none;\n  color: ",";\n"]);return He=function(){return e},e}function Be(){var e=Object(r.a)(["\n  color: ",";\n  font-size: 1.125rem;\n\n  display: flex;\n  flex-wrap: wrap;\n  [contenteditable='true']:empty:before {\n    content: attr(placeholder);\n    display: block; /* For Firefox */\n    color: ",";\n  }\n"]);return Be=function(){return e},e}function $e(){var e=Object(r.a)(["\n  display: block;\n  width: 100%;\n\n  color: ",";\n  transition: ease-in 0.125s;\n\n  & > .inside {\n    position: absolute;\n    background: ",";\n    color: white;\n    padding: 0.75rem;\n    z-index: 20;\n    line-height: 1.5;\n    font-size: 0.75rem;\n  }\n"]);return $e=function(){return e},e}var qe=function(e){var n=e.onClick,t=e.children;return a.createElement(Je,{onClick:n},t)},We=a.useState,Fe=a.useCallback,Ke=a.useEffect,Ve=a.useRef;function Ye(e){var n=e.focus,t=Object(me.useTransition)(n,{from:{opacity:0,transform:"translateY(-1rem)"},enter:{opacity:1,transform:"translateY(0rem)"},leave:{opacity:0,transform:"translateY(-1rem)"},config:{tension:350,friction:22}});return a.createElement(Ge,null,t((function(e,n){return n?a.createElement(me.animated.div,{className:"inside",style:e},"\uc27c\ud45c \ud639\uc740 \uc5d4\ud130\ub97c \uc785\ub825\ud558\uc5ec \ud0dc\uadf8\ub97c \ub4f1\ub85d \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.",a.createElement("br",null),"\ub4f1\ub85d\ub41c \ud0dc\uadf8\ub97c \ud074\ub9ad\ud558\uba74 \uc0ad\uc81c\ub429\ub2c8\ub2e4."):null})))}var Ge=o.c.div($e(),m.a.text2,M.b.gray8),Xe=o.c.div(Be(),m.a.text1,m.a.text3),Qe=o.c.input(He(),Object(d.b)(767),m.a.text1),Je=o.c.div(Me(),m.a.text1,m.a.bg_element2,m.a.primary1,s.a.popIn,Object(d.b)(767)),Ze=function(e){var n=e.onChange,t=e.tags,r=We(t),i=Object(c.a)(r,2),o=i[0],l=i[1],u=We(""),s=Object(c.a)(u,2),d=s[0],m=s[1],f=We(!1),b=Object(c.a)(f,2),p=b[0],h=b[1],g=Ve(!1),v=Ve(null);Ke((function(){0!==o.length&&n(o)}),[o,n]),Ke((function(){l(t)}),[t]);Ke((function(){v.current&&""===d&&(v.current.innerText=d)}),[d]);var O=Fe((function(e){if(g.current=!0,m(""),""!==e&&!o.includes(e)){var n=e;if((n=e.trim()).indexOf(" #")>0){for(var t=[],r=/#(\S+)/g,a=null;a=r.exec(n);)null!==a&&t.push(a[1]);l([].concat(Object(Ue.a)(o),t))}else"#"===n.charAt(0)&&(n=n.slice(1,n.length)),l([].concat(Object(Ue.a)(o),[n]))}}),[o]),j=Fe((function(e){if("Backspace"!==e.key||""!==d){[",","Enter"].includes(e.key)&&(e.preventDefault(),O(d))}else l(o.slice(0,o.length-1))}),[O,o,d]);return a.createElement(Xe,null,o.map((function(e){return a.createElement(qe,{key:e,onClick:function(){return function(e){var n=o.filter((function(n){return n!==e}));l(n)}(e)}},e)})),a.createElement(Qe,{placeholder:"\ud0dc\uadf8\ub97c \uc785\ub825\ud558\uc138\uc694",tabIndex:2,onKeyDown:j,onChange:function(e){m(e.target.value)},value:d,onFocus:function(){return h(!0)},onBlur:function(){return h(!1)}}),a.createElement(Ye,{focus:p}))},en={changeTags:u.d},nn=Object(l.b)((function(e){return{tags:e.write.tags}}),en)((function(e){var n=e.tags,t=e.changeTags;return a.createElement(Ze,{tags:n,onChange:t})})),tn=t(74);function rn(){var e=Object(r.a)(["\n  height: 2.5rem;\n  padding: 0.5rem 1rem;\n  align-items: center;\n  background: none;\n  border-radius: 4px;\n  cursor: pointer;\n  border: none;\n  display: flex;\n  outline: none;\n  color: ",";\n  &:hover,\n  &:focus {\n    background: ",";\n  }\n  svg {\n    font-size: 1.25rem;\n    margin-right: 0.5rem;\n  }\n  span {\n    font-size: 1.125rem;\n    "," {\n      display: none;\n    }\n  }\n"]);return rn=function(){return e},e}function an(){var e=Object(r.a)(["\n  height: 2.5rem;\n  font-size: 1.125rem;\n  & + & {\n    margin-left: 0.75rem;\n  }\n"]);return an=function(){return e},e}function on(){var e=Object(r.a)(["\n  justify-content: flex-end;\n  align-items: center;\n"]);return on=function(){return e},e}function cn(){var e=Object(r.a)(["\n  padding-left: 1rem;\n  padding-right: 1rem;\n  height: 4rem;\n  width: 100%;\n  box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.1);\n  background: ",";\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]);return cn=function(){return e},e}var ln=o.c.div(cn(),m.a.editor_footer),un=o.c.div(on()),sn=Object(o.c)(tn.a)(an()),dn=o.c.button(rn(),m.a.text1,m.a.slight_layer,d.a.xsmall),mn=function(e){var n=e.onGoBack,t=e.onTempSave,r=e.onPublish,i=e.edit;return a.createElement(ln,null,a.createElement(dn,{onClick:n},a.createElement(H.b,null),a.createElement("span",null,"\ub098\uac00\uae30")),a.createElement(un,null,a.createElement(sn,{inline:!0,color:"transparent",onClick:function(){return t(!0)}},"\uc784\uc2dc\uc800\uc7a5"),a.createElement(sn,{inline:!0,color:"teal",onClick:r},i?"\uc218\uc815\ud558\uae30":"\ucd9c\uac04\ud558\uae30")))},fn=t(368);function bn(){var e=Object(r.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  opacity: 0;\n  display: block;\n"]);return bn=function(){return e},e}function pn(){var e=Object(r.a)(["\n  z-index: ",";\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.3);\n"]);return pn=function(){return e},e}var hn=o.c.div(pn(),B.a.DragDropUpload),gn=o.c.input(bn()),vn=function(e){var n=e.onUpload,t=Object(a.useRef)(0),r=Object(a.useRef)(!1),o=Object(a.useState)(!1),l=Object(c.a)(o,2),u=l[0],s=l[1];return Object(a.useEffect)((function(){var e=function(e){e.preventDefault();var r=(e.dataTransfer||{files:null}).files;r&&r[0]&&(n(r[0]),t.current=0,s(!1),e.stopPropagation())},a=function(){r.current=!0},i=function(){r.current=!1},o=function(){r.current||(t.current+=1,1===t.current&&s(!0))},c=function(e){e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),u||s(!0)},l=function(){r.current||(t.current-=1,0===t.current&&s(!1))},d=function(){u&&s(!1)};return window.addEventListener("drop",e),window.addEventListener("dragover",c),window.addEventListener("mousedown",a),window.addEventListener("mouseup",i),window.addEventListener("dragenter",o),window.addEventListener("dragleave",l),document.addEventListener("mouseleave",d),function(){window.removeEventListener("drop",e),window.removeEventListener("dragover",c),window.removeEventListener("mousedown",a),window.removeEventListener("mouseup",i),window.removeEventListener("dragenter",o),window.removeEventListener("dragleave",l),document.removeEventListener("mouseleave",d)}}),[u,n]),u?i.a.createElement(hn,null,i.a.createElement(gn,{type:"file"})):null},On=function(e){var n=e.onUpload;return Object(a.useEffect)((function(){var e=function(e){var t=e.clipboardData;if(t){var r=t.items;if(0!==r.length){var a=function(){for(var e=[],n=0;n<r.length;n++)e.push(r[n]);return e}().filter((function(e){return"file"===e.kind}))[0];if(a&&a.getAsFile){var i=a.getAsFile();i&&(n(i),e.preventDefault())}}}};return window.addEventListener("paste",e),function(){window.removeEventListener("paste",e)}}),[n]),null},jn=t(35),wn=t(33),xn=t(85),En=t(15);var kn=t(472),yn=t(53),Cn=t(75),Sn=t(330),_n=t(69),Tn=t(155),zn=t(381),Dn=i.a.useCallback,Ln=i.a.useEffect,In=function(){var e=Object(En.g)(),n=Object(l.e)((function(e){return e.write})),t=n.title,r=n.markdown,o=n.thumbnail,s=n.postId,d=n.isTemp,m=n.initialBody,f=n.initialTitle,b=n.tags,p=Object(Tn.b)(),h=Object(wn.b)(xn.w,{client:p}),g=Object(c.a)(h,1)[0],v=Object(a.useRef)(m),O=Object(a.useRef)(t),j=Object(wn.b)(xn.a),w=Object(c.a)(j,1)[0],E=Object(wn.b)(xn.c,{client:p}),k=Object(c.a)(E,1)[0],y=Object(a.useState)({title:f,body:m}),C=Object(c.a)(y,2),S=C[0],_=C[1];Ln((function(){_({title:f,body:m})}),[f,m]);var T=Object(l.d)(),z=Object(a.useMemo)((function(){return Object(jn.bindActionCreators)({changeMarkdown:u.c,changeTitle:u.e,setHtml:u.o,convertEditorMode:u.i,openPublish:u.k,setDefaultDescription:u.n,setThumbnail:u.s,setInitialBody:u.p},T)}),[T]),D=Dn((function(){De()().use(Ne.a).process(r.replace(/#(.*?)\n/g,""),(function(e,n){var t=String(n).replace(/\n/g,"").slice(0,150);z.setDefaultDescription(t),z.openPublish()}))}),[z,r]),L=Object(fn.a)(),I=Object(c.a)(L,2),R=I[0],P=I[1],A=Object(zn.a)(),N=A.upload,U=A.image,M=Object(Sn.a)(U),H=Object(a.useState)(null),B=Object(c.a)(H,2),$=B[0],q=B[1];Ln((function(){U!==M&&!o&&U&&z.setThumbnail(U)}),[z,U,M,o]);var W=Dn((function(n){var a,i,o;return x.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(t&&r){c.next=3;break}return Cn.c.error("\uc81c\ubaa9 \ub610\ub294 \ub0b4\uc6a9\uc774 \ube44\uc5b4\uc788\uc2b5\ub2c8\ub2e4."),c.abrupt("return");case 3:if(a=function(){n&&Cn.c.success("\ud3ec\uc2a4\ud2b8\uac00 \uc784\uc2dc\uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")},s){c.next=14;break}return c.next=7,x.a.awrap(g({variables:{title:t,body:r,tags:b,is_markdown:!0,is_temp:!0,is_private:!1,url_slug:Object(ue.d)(t),thumbnail:null,meta:{},series_id:null}}));case 7:if((i=c.sent)&&i.data){c.next=10;break}return c.abrupt("return");case 10:o=i.data.writePost.id,T(Object(u.t)(o)),e.replace("/write?id=".concat(o)),a();case 14:if(!d){c.next=19;break}return c.next=17,x.a.awrap(k({variables:{id:s,title:t,body:r,is_markdown:!0,is_temp:!0,is_private:!1,url_slug:Object(ue.d)(t),thumbnail:null,meta:{},series_id:null,tags:b}}));case 17:return a(),c.abrupt("return");case 19:if(!Object(l.c)(S,{title:t,body:r})){c.next=21;break}return c.abrupt("return");case 21:return c.next=23,x.a.awrap(w({variables:{post_id:s,title:t,body:r,is_markdown:!0}}));case 23:_({title:t,body:r}),a();case 25:case"end":return c.stop()}}))}),[w,T,k,e,d,S,r,s,b,t,g]),F=Object(a.useRef)(s);Ln((function(){F.current=s}),[s]);var K,V=Dn((function(n){var t,r,a,i,o;return x.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(n){c.next=2;break}return c.abrupt("return");case 2:if(t=F.current){c.next=14;break}return r=O.current||"Temp Title",a=v.current||"Temp Body",c.next=8,x.a.awrap(g({variables:{title:r,body:a,tags:[],is_markdown:!0,is_temp:!0,is_private:!1,url_slug:Object(ue.d)(r),thumbnail:null,meta:{},series_id:null}}));case 8:if((i=c.sent)&&i.data){c.next=11;break}return c.abrupt("return");case 11:t=i.data.writePost.id,T(Object(u.t)(t)),e.replace("/write?id=".concat(t));case 14:if(t){c.next=16;break}return c.abrupt("return");case 16:o=URL.createObjectURL(n),q(o),N(n,{type:"post",refId:t}).catch((function(e){Cn.c.error("\uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc \uc2e4\ud328! \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud558\uc138\uc694.")}));case 19:case"end":return c.stop()}}))}),[N,g,T,e]),Y=Dn((function(e){V(e)}),[V]);Ln((function(){P&&V(P)}),[P,V]),Ln((function(){if(!Object(l.c)(S,{title:t,body:r})){var e=setTimeout((function(){!s&&!t&&r.length<30||W(!0)}),1e4);return function(){clearTimeout(e)}}}),[t,s,W,S,r]),K=function(){return W(!0)},Object(a.useEffect)((function(){var e=function(e){(e.ctrlKey||e.metaKey)&&83===e.keyCode&&(e.preventDefault(),K())};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[K]);var G=Object(l.e)((function(e){return"not-ready"!==e.darkMode.systemTheme})),X=Object(_n.a)();return Ln((function(){v.current=r,O.current=t}),[r,t]),G?i.a.createElement(i.a.Fragment,null,i.a.createElement(yn.a,null,i.a.createElement("title",null,t?"(\uc791\uc131\uc911) ".concat(t):"\uc0c8 \uae00 \uc791\uc131")),i.a.createElement(xe,{onUpload:R,tempBlobImage:$,lastUploadedImage:U,initialBody:m,title:t,markdown:r,onChangeMarkdown:z.changeMarkdown,onChangeTitle:z.changeTitle,onConvert:function(e){De()().use(Pe.a).use(Ie.a).use(kn.a).process(e,(function(e,n){var t=String(n);console.log(t),z.setHtml(t),z.setInitialBody(t),z.convertEditorMode()}))},tagInput:i.a.createElement(nn,null),footer:i.a.createElement(mn,{onPublish:D,onTempSave:W,onGoBack:function(){e.goBack()},edit:!!s&&!d}),theme:X}),i.a.createElement(vn,{onUpload:Y}),i.a.createElement(On,{onUpload:Y})):null},Rn=t(365);function Pn(){var e=Object(r.a)(["\n  font-size: 2.5em;\n  margin-bottom: 4rem;\n  font-weight: 800;\n"]);return Pn=function(){return e},e}function An(){var e=Object(r.a)(["\n  word-break: break-word;\n  padding: 3rem;\n  flex: 1;\n  overflow-y: auto;\n  color: ",";\n\n  /* width */\n  ::-webkit-scrollbar {\n    width: 4px;\n  }\n\n  /* Track */\n  ::-webkit-scrollbar-track {\n    box-shadow: inset 0 0 5px ",";\n    border-radius: 1px;\n  }\n\n  /* Handle */\n  ::-webkit-scrollbar-thumb {\n    background: ",";\n    border-radius: 1px;\n  }\n\n  /* Handle on hover */\n  ::-webkit-scrollbar-thumb:hover {\n    background: ",";\n  }\n"]);return An=function(){return e},e}var Nn=o.c.div(An(),m.a.text1,m.a.bg_element4,m.a.bg_element5,m.a.bg_element6),Un=o.c.h1(Pn()),Mn=function(e){var n=e.markdown,t=e.title;e.className;return a.createElement(Nn,{id:"preview"},a.createElement(Un,null,t),a.createElement(Rn.a,{markdown:n,editing:!0}))},Hn=Object(l.b)((function(e){var n=e.write;return{markdown:n.markdown,title:n.title}}),(function(e){return{}}))((function(e){var n=e.markdown,t=e.title;return a.createElement(Mn,{markdown:n,title:t})})),Bn=function(e){return a.createElement(j,{left:a.createElement(In,null),right:a.createElement(Hn,null)})},$n=t(110),qn=t.n($n),Wn=t(109),Fn=t(122),Kn=function(){var e=Object(a.useState)(!1),n=Object(c.a)(e,2),t=n[0],r=n[1],o=Object(l.e)((function(e){return e.write.postId})),s=Object(a.useState)(!1),d=Object(c.a)(s,2),m=d[0],f=d[1],b=Object(a.useRef)(!1),p=Object(Wn.b)(),h=Object(l.d)(),g=Object(En.h)(),v=qn.a.parse(g.search,{ignoreQueryPrefix:!0}).id;Object(a.useEffect)((function(){v||r(!0)}),[v]);var O=Object(wn.c)(xn.p,{variables:{id:v},skip:!v||t}),j=Object(wn.c)(xn.e,{variables:{post_id:v},skip:!v,fetchPolicy:"network-only"});Object(a.useEffect)((function(){return function(){h(Object(u.g)())}}),[h]);var w=Object(ue.i)((function(){return O.data.post}));Object(a.useEffect)((function(){w&&(b.current||(h(Object(u.l)({id:w.id,title:w.title,body:w.body,tags:w.tags,description:w.short_description,urlSlug:w.url_slug,series:w.series,isPrivate:w.is_private,isMarkdown:w.is_markdown,isTemp:w.is_temp,thumbnail:w.thumbnail})),h(Object(u.p)(w.body)),b.current=!0))}),[h,w]);var x=Object(ue.i)((function(){return j.data.lastPostHistory})),E=Object(a.useCallback)((function(){x&&(h(Object(u.q)(x.title)),h(Object(u.p)(x.body)),f(!1))}),[h,x]);return Object(a.useEffect)((function(){x&&(w&&(Object(l.c)({title:x.title,body:x.body},{title:w.title,body:w.body})||new Date(w.updated_at)<new Date(x.created_at)&&f(!0)))}),[h,x,w]),!t&&(!O.loading&&null===w||w&&w.user.id!==p)?i.a.createElement(Fn.a,null):!v||w||o?i.a.createElement(i.a.Fragment,null,i.a.createElement(Bn,null),i.a.createElement(se.a,{visible:m,title:"\uc784\uc2dc \ud3ec\uc2a4\ud2b8 \ubd88\ub7ec\uc624\uae30",onCancel:function(){return f(!1)},onConfirm:E},"\uc784\uc2dc\uc800\uc7a5\ub41c \ud3ec\uc2a4\ud2b8\ub97c \ubd88\ub7ec\uc624\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")):null},Vn=a.useLayoutEffect,Yn=function(e){return Vn((function(){var e=getComputedStyle(window.document.body),n={overflowX:e.overflowX,overflowY:e.overflowY};return window.document.body.style.overflowX="hidden",window.document.body.style.overflowY="hidden",function(){window.document.body.style.overflowX=n.overflowX,window.document.body.style.overflowY=n.overflowY}}),[]),null};function Gn(){var e=Object(r.a)(["\n  width: 1px;\n  min-height: 425px;\n  background: ",";\n  margin-left: 2rem;\n  margin-right: 2rem;\n  "," {\n    display: none;\n  }\n"]);return Gn=function(){return e},e}function Xn(){var e=Object(r.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n"]);return Xn=function(){return e},e}function Qn(){var e=Object(r.a)(["\n  flex: 1;\n  min-width: 0;\n"]);return Qn=function(){return e},e}function Jn(){var e=Object(r.a)(["\n  width: 768px;\n  display: flex;\n  "," {\n    width: 704px;\n  }\n  "," {\n    flex-direction: column;\n  }\n"]);return Jn=function(){return e},e}function Zn(){var e=Object(r.a)(["\n          animation: "," 0.125s forwards ease-out;\n        "]);return Zn=function(){return e},e}function et(){var e=Object(r.a)(["\n          animation: "," 0.25s forwards ease-in;\n        "]);return et=function(){return e},e}function nt(){var e=Object(r.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: fixed;\n  @media (max-width: 1024px) and (orientation: landscape) {\n    align-items: flex-start;\n    padding-top: 2rem;\n    padding-bottom: 2rem;\n    overflow: auto;\n  }\n\n  "," {\n    align-items: flex-start;\n    padding-top: 2rem;\n    padding-bottom: 2rem;\n    overflow: auto;\n    padding-left: 1rem;\n    padding-right: 1rem;\n  }\n\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background: ",";\n  z-index: ",";\n  animation: "," 0.25s forwards ease-in;\n  ","\n"]);return nt=function(){return e},e}var tt=o.c.div(nt(),d.a.custom(767),m.a.bg_element2,B.a.PublishScreen,s.a.slideUp,(function(e){return e.visible?Object(o.b)(et(),s.a.slideUp):Object(o.b)(Zn(),s.a.slideDown)})),rt=o.c.div(Jn(),d.a.medium,d.a.custom(767)),at=o.c.div(Qn()),it=Object(o.c)(at)(Xn()),ot=o.c.div(Gn(),m.a.bg_element3,d.a.custom(767)),ct=a.useState,lt=a.useEffect,ut=function(e){var n=e.visible,t=e.left,r=e.right,i=ct(!1),o=Object(c.a)(i,2),l=o[0],u=o[1];return lt((function(){var e=null;return n?u(!0):!n&&l&&(e=setTimeout((function(){u(!1)}),125)),function(){e&&clearTimeout(e)}}),[n,l]),n||l?a.createElement(tt,{visible:n},a.createElement(rt,null,a.createElement(at,null,t),a.createElement(ot,null),a.createElement(it,null,r)),a.createElement(Yn,null)):null},st=t(90);function dt(){var e=Object(r.a)(["\n  & > h3 {\n    font-size: 1.3125rem;\n    color: ",";\n    line-height: 1.5;\n    margin-bottom: 0.5rem;\n    margin-top: 0;\n  }\n  .contents {\n  }\n\n  & + & {\n    margin-top: 1.5rem;\n  }\n"]);return dt=function(){return e},e}var mt=o.c.section(dt(),m.a.text1),ft=function(e){var n=e.title,t=e.children,r=Object(st.a)(e,["title","children"]);return a.createElement(mt,r,a.createElement("h3",null,n),a.createElement("div",{className:"contents"},t))},bt=t(28),pt=t(113);function ht(){var e=Object(r.a)(["\n  display: flex;\n  justify-content: flex-end;\n  margin-bottom: 0.5rem;\n  & > .actions {\n    display: flex;\n    align-items: center;\n    button {\n      background: none;\n      outline: none;\n      border: none;\n      font-size: 1rem;\n      color: ",";\n      cursor: pointer;\n      padding: 0;\n      text-decoration: underline;\n      &:hover {\n        color: ",";\n      }\n      &:active {\n        color: ",";\n      }\n    }\n    .middledot {\n      margin-left: 0.5rem;\n      margin-right: 0.5rem;\n      display: block;\n      width: 2px;\n      height: 2px;\n      border-radius: 1px;\n      background: ",";\n    }\n  }\n"]);return ht=function(){return e},e}function gt(){var e=Object(r.a)(["\n      color: ",";\n    "]);return gt=function(){return e},e}function vt(){var e=Object(r.a)(["\n  text-align: right;\n  margin-top: 0.25rem;\n  font-size: 0.75rem;\n  color: ",";\n  ","\n"]);return vt=function(){return e},e}function Ot(){var e=Object(r.a)(["\n  resize: none;\n  width: 100%;\n  border: none;\n  outline: none;\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.03);\n  background: ",";\n  color: ",";\n  line-height: 1.5;\n  font-size: 0.875rem;\n  height: 7.375rem;\n  padding: 0.75rem 1rem;\n  margin-top: 0.5rem;\n"]);return Ot=function(){return e},e}function jt(){var e=Object(r.a)(["\n  margin-top: 1.5rem;\n  h4 {\n    line-height: 1.5;\n    margin: 0;\n    display: block;\n    font-size: 1.125rem;\n    ",";\n  }\n"]);return jt=function(){return e},e}function wt(){var e=Object(r.a)(["\n  margin-top: 1rem;\n  padding: 0.25rem 2rem;\n  background: ",";\n  border-radius: 4px;\n  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.025);\n  font-size: 1rem;\n  line-height: 1.5;\n  color: ",";\n  outline: none;\n  border: none;\n  cursor: pointer;\n  transition: all 0.125s ease-in;\n  font-weight: bold;\n  &:focus {\n    box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.15);\n  }\n  &:hover {\n    opacity: 0.7;\n  }\n"]);return wt=function(){return e},e}function xt(){var e=Object(r.a)(["\n  width: 100%;\n  height: 100%;\n  display: block;\n  object-fit: cover;\n"]);return xt=function(){return e},e}function Et(){var e=Object(r.a)(["\n  background: ",";\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n"]);return Et=function(){return e},e}function kt(){var e=Object(r.a)(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.03);\n"]);return kt=function(){return e},e}function yt(){var e=Object(r.a)(["\n  width: 100%;\n  padding-top: 55.11%;\n  position: relative;\n"]);return yt=function(){return e},e}function Ct(){var e=Object(r.a)([""]);return Ct=function(){return e},e}var St=Object(o.c)(ft)(Ct()),_t=o.c.div(yt()),Tt=o.c.div(kt()),zt=o.c.div(Et(),m.a.bg_element3),Dt=o.c.img(xt()),Lt=o.c.button(wt(),m.a.bg_element1,m.a.primary2),It=o.c.div(jt(),pt.b),Rt=o.c.textarea(Ot(),m.a.bg_element7,m.a.text1),Pt=o.c.div(vt(),m.a.text3,(function(e){return e.limit&&Object(o.b)(gt(),M.b.red6)})),At=function(e){var n=e.onUploadClick,t=e.thumbnail;return i.a.createElement(_t,null,i.a.createElement(Tt,null,t?i.a.createElement(Dt,{src:t,"data-testid":"image"}):i.a.createElement(zt,null,i.a.createElement(bt.j,null),i.a.createElement(Lt,{onClick:n},"\uc378\ub124\uc77c \uc5c5\ub85c\ub4dc"))))},Nt=o.c.div(ht(),m.a.text3,m.a.text3,m.a.text2,m.a.text4),Ut=function(e){var n=e.visible,t=e.onResetThumbnail,r=e.onChangeThumbnail;return n?i.a.createElement(Nt,null,i.a.createElement("div",{className:"actions"},i.a.createElement("button",{onClick:r},"\uc7ac\uc5c5\ub85c\ub4dc"),i.a.createElement("div",{className:"middledot"}),i.a.createElement("button",{onClick:t},"\uc81c\uac70"))):null},Mt=i.a.useCallback,Ht=function(e){var n=e.title,t=e.thumbnail,r=e.description,a=e.onChangeDescription,o=e.onUpload,c=e.onResetThumbnail,l=Mt((function(e){13===e.keyCode&&e.preventDefault()}),[]);return i.a.createElement(St,{title:"\ud3ec\uc2a4\ud2b8 \ubbf8\ub9ac\ubcf4\uae30"},i.a.createElement(Ut,{visible:!!t,onResetThumbnail:c,onChangeThumbnail:o}),i.a.createElement(At,{onUploadClick:o,thumbnail:t}),i.a.createElement(It,null,i.a.createElement("h4",null,n),i.a.createElement(Rt,{placeholder:"\ub2f9\uc2e0\uc758 \ud3ec\uc2a4\ud2b8\ub97c \uc9e7\uac8c \uc18c\uac1c\ud574\ubcf4\uc138\uc694.",value:r,onChange:function(e){a(e.target.value)},onKeyDown:l}),i.a.createElement(Pt,{limit:150===r.length},r.length,"/150")))},Bt={changeDescription:u.b,setThumbnail:u.s},$t=Object(l.b)((function(e){return{title:e.write.title,description:e.write.description,defaultDescription:e.write.defaultDescription,thumbnail:e.write.thumbnail}}),Bt)((function(e){var n=e.title,t=e.description,r=e.changeDescription,o=e.defaultDescription,s=e.thumbnail,d=e.setThumbnail,m=Object(a.useRef)(!1),f=Object(a.useCallback)((function(e){return r(e)}),[r]),b=Object(Tn.b)(),p=Object(wn.b)(xn.w,{client:b}),h=Object(c.a)(p,1)[0],g=Object(fn.a)(),v=Object(c.a)(g,2),O=v[0],j=v[1],w=Object(zn.a)(),E=w.upload,k=w.image,y=Object(l.e)((function(e){return e.write})),C=y.markdown,S=y.postId,_=y.tags;Object(a.useEffect)((function(){m.current||(t||r(o),m.current=!0)}),[r,o,t]);var T=Object(l.d)(),z=Object(a.useCallback)((function(){var e,t,r,a;return x.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(!S){i.next=2;break}return i.abrupt("return",S);case 2:return e=n||"Temp Title",t=C||"Temp Body",i.next=6,x.a.awrap(h({variables:{title:e,body:t,tags:_,is_markdown:!0,is_temp:!0,is_private:!1,url_slug:Object(ue.d)(e),thumbnail:null,meta:{},series_id:null}}));case 6:if((r=i.sent)&&r.data){i.next=9;break}return i.abrupt("return",null);case 9:return a=r.data.writePost.id,T(Object(u.t)(a)),i.abrupt("return",a);case 12:case"end":return i.stop()}}))}),[S,h,C,_,n,T]),D=Object(a.useCallback)((function(e){var n;return x.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.awrap(z());case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return");case 5:E(e,{type:"post",refId:n});case 6:case"end":return t.stop()}}))}),[E,z]);Object(a.useEffect)((function(){j&&D(j)}),[j]),Object(a.useEffect)((function(){k&&d(k)}),[k,d]);var L=Object(a.useCallback)((function(){d(null)}),[d]);return i.a.createElement(Ht,{title:n,description:t,onChangeDescription:f,onUpload:function(){O()},thumbnail:s,onResetThumbnail:L})}));function qt(){var e=Object(r.a)(["\n      border: solid 1px ",";\n      color: ",";\n      /* opacity: 1; */\n      &:hover {\n        opacity: 1;\n      }\n    "]);return qt=function(){return e},e}function Wt(){var e=Object(r.a)(["\n  outline: none;\n  border: none;\n  flex: 1;\n  height: 3rem;\n  display: inline-flex;\n  align-items: center;\n  justify-content: flex-start;\n  font-weight: bold;\n  background: ",";\n  font-size: 1.125rem;\n  color: ",";\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.05);\n  padding: 0;\n  padding-left: 1rem;\n  border-radius: 4px;\n  cursor: pointer;\n  border: solid 1px transparent;\n  &:hover {\n    opacity: 0.7;\n  }\n  ","\n\n  svg {\n  }\n  & + & {\n    margin-left: 1rem;\n  }\n  .description {\n    flex: 1;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n"]);return Wt=function(){return e},e}function Ft(){var e=Object(r.a)(["\n  outline: none;\n  border: none;\n  .contents {\n    display: flex;\n  }\n"]);return Ft=function(){return e},e}var Kt=Object(o.c)(ft)(Ft()),Vt=o.c.button(Wt(),m.a.bg_element7,m.a.text3,(function(e){return e.active&&Object(o.b)(qt(),m.a.primary2,m.a.primary2)})),Yt=a.useCallback,Gt=function(e){var n=e.isPrivate,t=e.onSelect,r=Yt((function(){t(!0)}),[t]),i=Yt((function(){t(!1)}),[t]);return a.createElement(Kt,{title:"\uacf5\uac1c \uc124\uc815"},a.createElement(Vt,{active:!n,onClick:i},a.createElement(bt.h,null),a.createElement("div",{className:"description"},"\uc804\uccb4 \uacf5\uac1c")),a.createElement(Vt,{active:n,onClick:r},a.createElement(bt.l,null),a.createElement("div",{className:"description"},"\ube44\uacf5\uac1c")))},Xt={setPrivacy:u.r},Qt=Object(l.b)((function(e){return{isPrivate:e.write.isPrivate}}),Xt)((function(e){var n=e.isPrivate,t=e.setPrivacy,r=Object(a.useCallback)((function(e){return t(e)}),[t]);return i.a.createElement(Gt,{isPrivate:n,onSelect:r})}));function Jt(){var e=Object(r.a)(["\n  font-size: 1rem;\n  background: none;\n  outline: none;\n  flex: 1;\n  border: none;\n  padding: 0;\n  line-height: 1.5;\n  color: ",";\n"]);return Jt=function(){return e},e}function Zt(){var e=Object(r.a)(["\n  display: flex;\n  background: ",";\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.03);\n  padding: 0.5rem 0.875rem;\n  line-height: 1.5;\n  .username {\n    color: ",";\n  }\n"]);return Zt=function(){return e},e}function er(){var e=Object(r.a)([""]);return er=function(){return e},e}var nr=Object(o.c)(ft)(er()),tr=o.c.div(Zt(),m.a.bg_element7,m.a.text3),rr=o.c.input(Jt(),m.a.text1),ar=function(e){var n=e.username,t=e.urlSlug,r=e.onChangeUrlSlug,i=a.useCallback((function(e){return r(e.target.value)}),[r]);return a.createElement(nr,{title:"URL \uc124\uc815"},a.createElement(tr,null,a.createElement("div",{className:"username"},"/@",n,"/"),a.createElement(rr,{value:t,onChange:i})))},ir=t(828),or={changeUrlSlug:u.f},cr=Object(l.b)((function(e){return{username:e.core.user&&e.core.user.username,title:e.write.title,urlSlug:e.write.urlSlug}}),or)((function(e){var n=e.username,t=e.title,r=e.urlSlug,o=e.changeUrlSlug,c=Object(ue.d)(t),l=Object(a.useCallback)((function(e){return o(e)}),[o]);return Object(ir.a)((function(){r||o(c)})),n?i.a.createElement(ar,{username:n,urlSlug:r,onChangeUrlSlug:l}):null}));function lr(){var e=Object(r.a)(["\n  margin-top: 8px;\n  display: flex;\n  justify-content: flex-end;\n  button {\n    outline: none;\n    border: none;\n    background: none;\n    font-size: 1rem;\n    color: ",";\n    padding: 0;\n    &:hover {\n      color: ",";\n      text-decoration: underline;\n    }\n    cursor: pointer;\n  }\n"]);return lr=function(){return e},e}function ur(){var e=Object(r.a)(["\n  height: 3rem;\n  width: 100%;\n  display: flex;\n  border-radius: 4px;\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.05);\n  overflow: hidden;\n  .name-wrapper {\n    min-width: 0;\n    display: flex;\n    align-items: center;\n    padding-left: 1rem;\n    padding-right: 1rem;\n    background: ",";\n    font-size: 1.125rem;\n    line-height: 1;\n    color: ",";\n    flex: 1;\n  }\n  .name {\n    ","\n  }\n  button {\n    outline: none;\n    color: white;\n    background: ",";\n    font-size: 1.25rem;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 48px;\n    border: none;\n    cursor: pointer;\n    &:hover {\n      background: ",";\n    }\n    &:active {\n      background: ",";\n    }\n  }\n"]);return ur=function(){return e},e}function sr(){var e=Object(r.a)(["\n  background: ",";\n  height: 3rem;\n  width: 100%;\n  border-radius: 4px;\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.05);\n  border: none;\n  outline: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: ",";\n  font-size: 1.125rem;\n  font-weight: bold;\n  cursor: pointer;\n  svg {\n    margin-right: 0.875rem;\n  }\n  &:hover {\n    opacity: 0.7;\n  }\n"]);return sr=function(){return e},e}function dr(){var e=Object(r.a)([""]);return dr=function(){return e},e}var mr=Object(o.c)(ft)(dr()),fr=o.c.button(sr(),m.a.bg_element7,m.a.primary2),br=o.c.div(ur(),m.a.bg_element1,m.a.text2,pt.b,m.a.primary1,m.a.primary2,m.a.primary1),pr=o.c.div(lr(),M.b.red5,M.b.red6),hr=function(e){var n=e.onEdit,t=e.onReset,r=e.selected;return a.createElement(mr,{title:"\uc2dc\ub9ac\uc988 \uc124\uc815"},r?a.createElement(a.Fragment,null,a.createElement(br,null,a.createElement("div",{className:"name-wrapper"},a.createElement("div",{className:"name"},r.name)),a.createElement("button",{onClick:n,"data-testid":"setting-button"},a.createElement(H.w,null))),a.createElement(pr,null,a.createElement("button",{onClick:t},"\uc2dc\ub9ac\uc988\uc5d0\uc11c \uc81c\uac70"))):a.createElement(fr,{onClick:n},a.createElement(bt.a,null),"\uc2dc\ub9ac\uc988\uc5d0 \ucd94\uac00\ud558\uae30"))},gr=function(e){var n=Object(l.e)((function(e){return e.write.selectedSeries})),t=Object(l.d)();return a.createElement(hr,{onEdit:function(){t(Object(u.u)())},selected:n,onReset:function(){t(Object(u.m)(null))}})};function vr(){var e=Object(r.a)(["\n  display: flex;\n  justify-content: flex-end;\n  "," {\n    margin-top: 2rem;\n  }\n"]);return vr=function(){return e},e}var Or=o.c.div(vr(),d.a.custom(767)),jr=function(e){var n=e.onCancel,t=e.onPublish,r=e.edit;return a.createElement(Or,null,a.createElement(tn.a,{size:"large","data-testid":"cancelPublish",color:"transparent",onClick:n},"\ucde8\uc18c"),a.createElement(tn.a,{size:"large","data-testid":"publish",onClick:t},r?"\uc218\uc815\ud558\uae30":"\ucd9c\uac04\ud558\uae30"))},wr=t(827),xr=t(403),Er=function(){var e=Object(En.g)(),n=Object(wn.a)(),t=Object(l.e)((function(e){return Object(wr.a)(["mode","markdown","title","html","tags","defaultDescription","description","isPrivate","urlSlug","thumbnail","selectedSeries","postId","isTemp"],e.write)})),r=Object(l.d)(),o=Object(a.useCallback)((function(){r(Object(u.h)())}),[r]),s=Object(Tn.b)(),d=Object(wn.b)(xn.w,{client:s}),m=Object(c.a)(d,1)[0],f=Object(wn.b)(xn.c,{client:s}),b=Object(c.a)(f,1)[0],p={title:t.title,body:t.mode===u.a.MARKDOWN?t.markdown:Object(xr.b)(t.html),tags:t.tags,is_markdown:t.mode===u.a.MARKDOWN,is_temp:!1,is_private:t.isPrivate,url_slug:t.urlSlug||Object(ue.d)(t.title),thumbnail:t.thumbnail,meta:{short_description:t.description},series_id:Object(ue.i)((function(){return t.selectedSeries.id}))};return i.a.createElement(jr,{onCancel:o,onPublish:t.postId?function(){var r,a,i,o;return x.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,x.a.awrap(b({variables:Object(k.a)({id:t.postId},p)}));case 2:if((r=c.sent)&&r.data){c.next=5;break}return c.abrupt("return");case 5:return a=r.data.editPost,i=a.user,o=a.url_slug,c.next=8,x.a.awrap(n.resetStore());case 8:e.push("/@".concat(i.username,"/").concat(o));case 9:case"end":return c.stop()}}))}:function(){var r,a,i,o;return x.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(""!==t.title.trim()){c.next=3;break}return Cn.c.error("\uc81c\ubaa9\uc774 \ube44\uc5b4\uc788\uc2b5\ub2c8\ub2e4."),c.abrupt("return");case 3:return c.prev=3,c.next=6,x.a.awrap(m({variables:p}));case 6:if((r=c.sent)&&r.data){c.next=9;break}return c.abrupt("return");case 9:return a=r.data.writePost,i=a.user,o=a.url_slug,c.next=12,x.a.awrap(n.resetStore());case 12:e.push("/@".concat(i.username,"/").concat(o)),c.next=18;break;case 15:c.prev=15,c.t0=c.catch(3),Cn.c.error("\ud3ec\uc2a4\ud2b8 \uc791\uc131 \uc2e4\ud328");case 18:case"end":return c.stop()}}),null,null,[[3,15]])},edit:!!t.postId&&!t.isTemp})},kr=function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,i.a.createElement(Qt,null),i.a.createElement(cr,null),i.a.createElement(gr,null)),i.a.createElement(Er,null))},yr=t(153);function Cr(){var e=Object(r.a)(["\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 0.5rem;\n"]);return Cr=function(){return e},e}function Sr(){var e=Object(r.a)(["\n      animation-name: ",";\n    "]);return Sr=function(){return e},e}function _r(){var e=Object(r.a)(["\n  margin-top: 0.5rem;\n  animation-duration: 0.125s;\n  animation-timing-function: ease-out;\n  animation-name: ",";\n  animation-fill-mode: forwards;\n\n  ","\n"]);return _r=function(){return e},e}function Tr(){var e=Object(r.a)(["\n  height: 2rem;\n  width: 100%;\n  display: flex;\n  padding: 0.5rem;\n  font-size: 0.75rem;\n  border-radius: 2px;\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.03);\n  background: ",";\n  color: ",";\n  input {\n    color: ",";\n    flex: 1;\n    outline: none;\n    border: none;\n    font-size: inherit;\n    background: transparent;\n  }\n"]);return Tr=function(){return e},e}function zr(){var e=Object(r.a)(["\n  height: 2rem;\n  width: 100%;\n  padding: 0.5rem;\n  font-size: 0.875rem;\n  border-radius: 2px;\n  border: none;\n  outline: none;\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.03);\n  background: ",";\n  color: ",";\n  &::placeholder {\n    color: ",";\n  }\n"]);return zr=function(){return e},e}function Dr(){var e=Object(r.a)(["\n      height: 9rem;\n    "]);return Dr=function(){return e},e}function Lr(){var e=Object(r.a)(["\n  background: ",";\n  padding: 1rem;\n  height: 4rem;\n  transition: 0.125s all ease-in;\n  ","\n"]);return Lr=function(){return e},e}function Ir(){var e=Object(r.a)(["\n  from {\n    opacity: 1;\n  }\n  to {\n    opacity: 0;\n  }\n"]);return Ir=function(){return e},e}function Rr(){var e=Object(r.a)(["\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n"]);return Rr=function(){return e},e}var Pr=Object(o.d)(Rr()),Ar=Object(o.d)(Ir()),Nr=o.c.form(Lr(),m.a.bg_element3,(function(e){return e.open&&Object(o.b)(Dr())})),Ur=o.c.input(zr(),m.a.bg_element1,m.a.text1,m.a.text3),Mr=o.c.div(Tr(),m.a.bg_element1,m.a.text3,m.a.text1),Hr=o.c.div(_r(),Pr,(function(e){return e.disappear&&Object(o.b)(Sr(),Ar)})),Br=o.c.div(Cr()),$r=function(e){var n=e.onSubmit,t=e.username,r=Object(a.useState)(!1),o=Object(c.a)(r,2),l=o[0],u=o[1],s=Object(a.useState)(!1),d=Object(c.a)(s,2),m=d[0],f=d[1],b=Object(a.useState)(!1),p=Object(c.a)(b,2),h=p[0],g=p[1],v=Object(yr.a)({name:"",urlSlug:""}),O=Object(c.a)(v,3),j=O[0],w=O[1],x=O[2],E=Object(a.useState)(!1),k=Object(c.a)(E,2),y=k[0],C=k[1],S=Object(a.useState)(""),_=Object(c.a)(S,2),T=_[0],z=_[1];Object(a.useEffect)((function(){var e=null;return l?e=setTimeout((function(){return f(!0)}),125):f(!1),function(){e&&clearTimeout(e)}}),[l]),Object(a.useEffect)((function(){z(Object(ue.d)(j.name))}),[j.name]),Object(a.useEffect)((function(){""!==j.urlSlug&&C(!0)}),[j.urlSlug]);var D=function(){g(!0),setTimeout((function(){u(!1),g(!1),f(!1)}),125)};return i.a.createElement(ee.a,{onOutsideClick:D},i.a.createElement(Nr,{open:l,onSubmit:function(e){e.preventDefault(),""!==j.name.trim()?(n({name:j.name,urlSlug:j.urlSlug||T}),x(),D()):Cn.c.error("\uc2dc\ub9ac\uc988 \uc81c\ubaa9\uc774 \ube44\uc5b4\uc788\uc2b5\ub2c8\ub2e4.")}},i.a.createElement(Ur,{placeholder:"\uc0c8\ub85c\uc6b4 \uc2dc\ub9ac\uc988 \uc774\ub984\uc744 \uc785\ub825\ud558\uc138\uc694",onFocus:function(){return u(!0)},name:"name",onChange:w,value:j.name}),m&&i.a.createElement(Hr,{disappear:h},i.a.createElement(Mr,null,i.a.createElement("span",null,"/@",t,"/series/"),i.a.createElement("input",{"data-testid":"urlslug-input",name:"urlSlug",onChange:w,value:y?j.urlSlug:T})),i.a.createElement(Br,null,i.a.createElement(tn.a,{inline:!0,color:"transparent",onClick:D,type:"button"},"\ucde8\uc18c"),i.a.createElement(tn.a,{inline:!0,color:"teal",type:"submit"},"\uc2dc\ub9ac\uc988 \ucd94\uac00")))))};function qr(){var e=Object(r.a)(["\n  display: flex;\n  width: 100%;\n  flex: 1;\n  flex-direction: column;\n  border-radius: 2px;\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.03);\n  overflow: hidden;\n"]);return qr=function(){return e},e}function Wr(){var e=Object(r.a)(["\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  .contents {\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n  }\n"]);return Wr=function(){return e},e}var Fr=Object(o.c)(ft)(Wr()),Kr=o.c.div(qr()),Vr=function(e){var n=e.children,t=e.buttons;return i.a.createElement(Fr,{title:"\uc2dc\ub9ac\uc988 \uc124\uc815"},i.a.createElement(Kr,null,n),t)};function Yr(){var e=Object(r.a)(["\n      background: ",";\n      color: ",";\n    "]);return Yr=function(){return e},e}function Gr(){var e=Object(r.a)(["\n  padding: 0.875rem 1rem;\n  font-size: 1rem;\n  line-height: 1;\n  color: ",";\n  border-bottom: 1px solid ",";\n\n  ",";\n"]);return Gr=function(){return e},e}function Xr(){var e=Object(r.a)(["\n  padding-left: 0;\n  list-style: none;\n  margin: 0;\n  background: ",";\n  overflow-y: auto;\n"]);return Xr=function(){return e},e}var Qr=o.c.ul(Xr(),m.a.bg_element7),Jr=o.c.li(Gr(),m.a.text2,m.a.border3,(function(e){return e.active&&Object(o.b)(Yr(),m.a.primary1,m.a.button_text)})),Zr=i.a.forwardRef((function(e,n){var t=e.list,r=e.selectedId,a=e.className,o=e.onChangeId;return i.a.createElement(Qr,{className:a,ref:n},t.map((function(e){return i.a.createElement(Jr,{className:"list-item",active:e.id===r,key:e.id,onClick:function(){return o(e.id)}},e.text)})))}));function ea(){var e=Object(r.a)(["\n  height: 16.5625rem;\n  overflow-y: auto;\n"]);return ea=function(){return e},e}var na=Object(o.c)(Zr)(ea()),ta=t(404);function ra(){var e=Object(r.a)(["\n  margin-top: 1rem;\n  padding-top: 1px;\n  display: flex;\n  justify-content: flex-end;\n"]);return ra=function(){return e},e}var aa=o.c.div(ra()),ia=function(e){var n=e.onCancel,t=e.onConfirm,r=e.disableConfirm;return i.a.createElement(aa,null,i.a.createElement(tn.a,{inline:!0,size:"large",color:"transparent",onClick:n},"\ucde8\uc18c"),i.a.createElement(tn.a,{inline:!0,size:"large",onClick:t,disabled:r},"\uc120\ud0dd\ud558\uae30"))},oa=function(e){var n=Object(Wn.a)(),t=Object(l.e)((function(e){return e.write.selectedSeries})),r=Object(a.useState)(t?t.id:null),o=Object(c.a)(r,2),s=o[0],d=o[1],m=Object(l.d)(),f=Object(wn.c)(ta.d,{variables:{username:Object(ue.i)((function(){return n.username}))}}),b=Object(wn.b)(ta.a),p=Object(c.a)(b,1)[0],h=Object(a.useMemo)((function(){return f.data&&f.data.seriesList?f.data.seriesList.sort((function(e,n){var t=new Date(e.created_at),r=new Date(n.created_at);return t<r?-1:t>r?1:0})).map((function(e){return{id:e.id,text:e.name}})):[]}),[f.data]);return i.a.createElement(Vr,{buttons:i.a.createElement(ia,{onConfirm:function(){if(f.data&&f.data.seriesList){var e=f.data.seriesList.find((function(e){return e.id===s}));e&&s&&(m(Object(u.m)({id:s,name:e.name})),m(Object(u.u)()))}},onCancel:function(){m(Object(u.u)())},disableConfirm:!s})},i.a.createElement($r,{onSubmit:function(e){var n,t,r,a,i;return x.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n=e.name,t=e.urlSlug,o.prev=1,o.next=4,x.a.awrap(p({variables:{name:n,url_slug:t}}));case 4:if((r=o.sent)&&r.data){o.next=7;break}return o.abrupt("return");case 7:return o.next=9,x.a.awrap(Object(ue.j)(150));case 9:return o.next=11,x.a.awrap(f.refetch());case 11:if(d(r.data.createSeries.id),0!==(a=document.querySelectorAll(".list-item")).length){o.next=15;break}return o.abrupt("return");case 15:return o.next=17,x.a.awrap(Object(ue.j)(50));case 17:a.item(a.length-1).scrollIntoView(),o.next=27;break;case 21:if(o.prev=21,o.t0=o.catch(1),!(null===(i=o.t0)||void 0===i?void 0:i.message).includes("URL Slug already exists")){o.next=26;break}return Cn.c.error("\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 URL\uc785\ub2c8\ub2e4."),o.abrupt("return");case 26:Cn.c.error("\uc2dc\ub9ac\uc988 \uc0dd\uc131 \uc2e4\ud328");case 27:case"end":return o.stop()}}),null,null,[[1,21]])},username:Object(ue.i)((function(){return n.username}))||""}),i.a.createElement(na,{list:h,selectedId:s,onChangeId:function(e){s===e&&d(null),d(e)}}))},ca=function(){var e=Object(l.e)((function(e){return{visible:e.write.publish,editSeries:e.write.editSeries}})),n=e.visible,t=e.editSeries;return a.createElement(ut,{visible:n,left:a.createElement($t,null),right:t?a.createElement(oa,null):a.createElement(kr,null)})};function la(){var e=Object(r.a)(["\n  width: 100%;\n  height: 100%;\n"]);return la=function(){return e},e}var ua=o.c.div(la());n.default=function(){return a.createElement(ua,null,a.createElement(Kn,null),a.createElement(ca,null))}},368:function(e,n,t){"use strict";var r=t(8),a=t(0);n.a=function(){var e=Object(a.useState)(null),n=Object(r.a)(e,2),t=n[0],i=n[1];return[Object(a.useCallback)((function(){return new Promise((function(e,n){var t=document.createElement("input");t.accept="image/*";var r=setTimeout(n,18e4);t.type="file",t.onchange=function(){if(clearTimeout(r),console.log("onchange"),console.log(t.files),!t.files)return n();var a=t.files[0];i(a),e(a)},t.click()}))}),[]),t]}},381:function(e,n,t){"use strict";var r=t(12),a=t.n(r),i=t(8),o=t(0),c=t(61);function l(e,n,t){var r,i;return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=new FormData).append("image",e),r.append("type",n.type),n.refId&&r.append("ref_id",n.refId),t.next=6,a.a.awrap(c.a.post("/api/v2/files/upload",r,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){console.log(e)}}));case 6:return i=t.sent,t.abrupt("return",i.data);case 8:case"end":return t.stop()}}))}var u=t(158);function s(){var e=Object(u.c)(),n=Object(i.a)(e,1)[0],t=Object(o.useState)(null),r=Object(i.a)(t,2),c=r[0],s=r[1];return{image:c,upload:Object(o.useCallback)((function(e,n){var t;return a.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a.a.awrap(l(e,n));case 2:return t=r.sent,s(t.path),r.abrupt("return",t.path);case 5:case"end":return r.stop()}}))}),[n])}}t.d(n,"a",(function(){return s}))},384:function(e,n,t){},385:function(e,n,t){},403:function(e,n,t){"use strict";t.d(n,"b",(function(){return i})),t.d(n,"a",(function(){return o}));var r=t(34),a=t(17);function i(e){var n=document.createElement("div");n.innerHTML=e;var t=n.querySelectorAll("h1"),r=n.querySelectorAll("h2"),i=n.querySelectorAll("h3"),o=[],c=function(e){var n=Object(a.d)(e.innerText),t=o.filter((function(e){return-1!==e.indexOf(n)})),r="".concat(n).concat(0===t.length?"":"-".concat(t.length));e.id=r,o.push(r)};return[t,r,i].forEach((function(e){return e.forEach(c)})),n.innerHTML}function o(e){var n=document.createElement("div");n.innerHTML=e;var t=Array.from(n.children).filter((function(e){return e.tagName.match(/H([1-3])/)})).map((function(e){return{id:e.id,text:e.textContent,level:parseInt(e.tagName.replace("H",""),10)}})),a=Math.min.apply(Math,Object(r.a)(Array.from(t.map((function(e){return e.level})))));return t.forEach((function(e){e.level-=a})),t}},404:function(e,n,t){"use strict";t.d(n,"d",(function(){return m})),t.d(n,"a",(function(){return f})),t.d(n,"c",(function(){return b})),t.d(n,"b",(function(){return p})),t.d(n,"e",(function(){return h}));var r=t(4),a=t(16),i=t.n(a);function o(){var e=Object(r.a)(["\n  mutation RemoveSeries($id: ID!) {\n    removeSeries(id: $id)\n  }\n"]);return o=function(){return e},e}function c(){var e=Object(r.a)(["\n  mutation EditSeries($id: ID!, $name: String!, $series_order: [ID]) {\n    editSeries(id: $id, name: $name, series_order: $series_order) {\n      id\n      name\n      user {\n        id\n        username\n        profile {\n          id\n          display_name\n          short_bio\n          thumbnail\n          profile_links\n        }\n      }\n      series_posts {\n        id\n        index\n        post {\n          id\n          title\n          thumbnail\n          short_description\n          url_slug\n          released_at\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}function l(){var e=Object(r.a)(["\n  query Series($username: String, $url_slug: String) {\n    series(username: $username, url_slug: $url_slug) {\n      id\n      name\n      user {\n        id\n        username\n        profile {\n          id\n          display_name\n          short_bio\n          thumbnail\n          profile_links\n        }\n      }\n      series_posts {\n        id\n        index\n        post {\n          id\n          title\n          thumbnail\n          short_description\n          url_slug\n          released_at\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}function u(){var e=Object(r.a)(["\n  mutation AppendToSeries($series_id: ID!, $post_id: ID!) {\n    appendToSeries(series_id: $series_id, post_id: $post_id)\n  }\n"]);return u=function(){return e},e}function s(){var e=Object(r.a)(["\n  mutation CreateSeries($name: String!, $url_slug: String!) {\n    createSeries(name: $name, url_slug: $url_slug) {\n      id\n      name\n      url_slug\n      created_at\n    }\n  }\n"]);return s=function(){return e},e}function d(){var e=Object(r.a)(["\n  query GetSeriesList($username: String) {\n    seriesList(username: $username) {\n      id\n      url_slug\n      name\n      created_at\n    }\n  }\n"]);return d=function(){return e},e}var m=i()(d()),f=i()(s()),b=(i()(u()),i()(l())),p=i()(c()),h=i()(o())}}]);
//# sourceMappingURL=pages-WritePage.a4330cab.chunk.js.map